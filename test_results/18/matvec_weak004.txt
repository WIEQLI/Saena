folder 9
export OMP_NUM_THREADS=14

node = 1
mpirun -np 1 ../petsc010 
3903791

number of processes = 1
mx = 32, my = 32, mz = 64
m = 65536, n = 65536
nnz = 448512


Saena Matvec:
min: 0.000217587
ave: 0.000217587
max: 0.000217587

rank = 0

1- Saena matvec total time:
0.000216462

2- set vSend:
6.29977e-06

3- local loop:
0.000209538

4- remote loop:
6.84344e-08

5- local and remote loop:
0.000209606

6- Isend, Irecv:
3.66444e-07

7- waitall:
1.8973e-07

8- Isend, Irecv and waitall:
5.56174e-07
            

--------------------------------------------------------

node = 1
mpirun -np 2 ../petsc010 
3903792

number of processes = 2
mx = 32, my = 64, mz = 64
m = 131072, n = 131072
nnz = 450560


Saena Matvec:
min: 0.000323212
ave: 0.000323862
max: 0.000324511

rank = 0

1- Saena matvec total time:
0.000306262

2- set vSend:
7.30672e-06

3- local loop:
0.000272404

4- remote loop:
1.65432e-05

5- local and remote loop:
0.000288947

6- Isend, Irecv:
5.40349e-06

7- waitall:
4.60527e-06

8- Isend, Irecv and waitall:
1.00088e-05


--------------------------------------------------------

node = 2
mpirun -np 4 ../petsc010 
3903793

number of processes = 4
mx = 64, my = 64, mz = 64
m = 262144, n = 262144
nnz = 452608


Saena Matvec:
min: 0.000827232
ave: 0.000837963
max: 0.000845961

rank = 0

1- Saena matvec total time:
0.000295322

2- set vSend:
7.84474e-06

3- local loop:
0.000245056

4- remote loop:
2.91906e-05

5- local and remote loop:
0.000274247

6- Isend, Irecv:
7.66898e-06

7- waitall:
5.56112e-06

8- Isend, Irecv and waitall:
1.32301e-05

--------------------------------------------------------

node = 4
mpirun -np 8 ../petsc010 
3903794

number of processes = 8
mx = 64, my = 64, mz = 128
m = 524288, n = 524288
nnz = 452608


Saena Matvec:
min: 0.00128798
ave: 0.00128926
max: 0.00129241

rank = 0

1- Saena matvec total time:
0.000282932

2- set vSend:
7.42291e-06

3- local loop:
0.000231093

4- remote loop:
2.86169e-05

5- local and remote loop:
0.00025971

6- Isend, Irecv:
9.31694e-06

7- waitall:
6.48276e-06

8- Isend, Irecv and waitall:
1.57997e-05


--------------------------------------------------------

node = 8
mpirun -np 16 ../petsc010 
3903795

number of processes = 16
mx = 64, my = 128, mz = 128
m = 1048576, n = 1048576
nnz = 453632


Saena Matvec:
min: 0.00262937
ave: 0.0026352
max: 0.00263749

rank = 0

1- Saena matvec total time:
0.000394561

2- set vSend:
7.14496e-05

3- local loop:
0.000227424

4- remote loop:
4.26067e-05

5- local and remote loop:
0.000270031

6- Isend, Irecv:
9.82427e-07

7- waitall:
5.20976e-05

8- Isend, Irecv and waitall:
5.30801e-05

--------------------------------------------------------
--------------------------------------------------------
--------------------------------------------------------

second attemp with warm-up matvec:

matvec_timing2 (send and recv instead of isend and irecv)

node = 1
mpirun -np 1 ../petsc010 
3904064.out

number of processes = 1
mx = 32, my = 32, mz = 64
m = 65536, n = 65536
nnz = 448512


Saena Matvec:
min: 0.000141256
ave: 0.000141256
max: 0.000141256


1- Saena matvec total time:
0.000140408

2- set vSend:
4.59426e-06

3- local loop:
0.000135551

4- remote loop:
8.53627e-08

5- local and remote loop:
0.000135636

6- Isend, Irecv:
1.77719e-07

7- waitall:
0

8- Isend, Irecv and waitall:
1.77719e-07


--------------------------------------------------------

node = 1
mpirun -np 2 ../petsc010 
3904065.out

number of processes = 2
mx = 32, my = 64, mz = 64
m = 131072, n = 131072
nnz = 450560


Saena Matvec:
min: 0.000358322
ave: 0.000358323
max: 0.000358323


1- Saena matvec total time:
0.000272308

2- set vSend:
6.36872e-06

3- local loop:
0.000176368

4- remote loop:
6.7852e-05

5- local and remote loop:
0.00024422

6- Isend, Irecv:
2.17187e-05

7- waitall:
0

8- Isend, Irecv and waitall:
2.17187e-05


--------------------------------------------------------

node = 2
mpirun -np 4 ../petsc010 
3904066.out

number of processes = 4
mx = 64, my = 64, mz = 64
m = 262144, n = 262144
nnz = 452608


Saena Matvec:
min: 0.00149962
ave: 0.00149966
max: 0.00149971


1- Saena matvec total time:
0.000694802

2- set vSend:
1.82011e-05

3- local loop:
0.000304237

4- remote loop:
0.000334079

5- local and remote loop:
0.000638315

6- Isend, Irecv:
3.82856e-05

7- waitall:
0

8- Isend, Irecv and waitall:
3.82856e-05

--------------------------------------------------------

node = 4
mpirun -np 8 ../petsc010 
3904074.out

number of processes = 8
mx = 64, my = 64, mz = 128
m = 524288, n = 524288
nnz = 452608


Saena Matvec:
min: 0.00177676
ave: 0.0017768
max: 0.00177686


1- Saena matvec total time:
0.000763825

2- set vSend:
1.95364e-05

3- local loop:
0.000281868

4- remote loop:
0.000419669

5- local and remote loop:
0.000701537

6- Isend, Irecv:
4.27519e-05

7- waitall:
0

8- Isend, Irecv and waitall:
4.27519e-05

--------------------------------------------------------

node = 8
mpirun -np 16 ../petsc010 
3904075.out

error






